<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TRUEX Analytics</title>
  <style>
    :root { color-scheme: dark; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:#0b0f14; color:#e6edf3; }
    header { padding: 20px 18px; border-bottom: 1px solid #1f2630; position: sticky; top:0; background:#0b0f14; z-index: 5; }
    h1 { margin: 0 0 6px 0; font-size: 20px; }
    .muted { color:#9aa4b2; margin: 6px 0; }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 16px; }
    .card { background:#111826; border: 1px solid #1f2630; border-radius: 12px; padding: 14px; margin: 12px 0; box-shadow: 0 6px 20px rgba(0,0,0,.25); }
    .meta { display:flex; gap:18px; flex-wrap: wrap; font-size: 12px; color:#c8d1db; }
    .label { color:#9aa4b2; margin-right:6px; }
    a { color:#8ab4ff; text-decoration: none; }
    code { color:#c8d1db; }
  </style>
</head>
<body>

<header>
  <div class="wrap">
    <h1>TRUEX Analytics</h1>
    <div class="muted">
      Deterministic summary derived exclusively from published payload artifacts.
    </div>

    <div class="card">
      <strong>Seal Metadata (Authoritative)</strong>
      <div id="sealMeta" class="meta">
        <div>Loading seal...</div>
      </div>
      <div class="muted">
        Source: <a href="./latest/payload_seal.json">latest/payload_seal.json</a>
      </div>
    </div>

    <div class="muted">
      Artifacts:
      <a href="./latest/analytics/summary_latest.json">summary_latest.json</a> •
      <a href="./latest/analytics/rolling_windows_latest.json">rolling_windows_latest.json</a> •
      <a href="./latest/analytics/by_odds_bucket_latest.json">by_odds_bucket_latest.json</a> •
      <a href="./latest/analytics/by_model_id_latest.json">by_model_id_latest.json</a> •
      <a href="./latest/analytics/equity_curve_latest.json">equity_curve_latest.json</a>
    </div>

    <div class="muted">
      This page is a static UI shell. Authority comes from payload artifacts and the seal.
    </div>
  </div>
</header>

<div class="wrap">
  <section class="card">
    <h2>Authority Notice</h2>
    <ul>
      <li>This page reads only the published <code>latest/analytics/*.json</code> artifacts.</li>
      <li>All numbers are derived from frozen bets only (no post-lock changes).</li>
      <li>If any artifact changes, the seal changes.</li>
    </ul>
  </section>

  <!-- Keep the rest of your existing static analytics HTML below (tables/sections).
       Your current analytics page is generated content; paste it below this line
       OR keep it as-is if your publish runbook rewrites the body. -->
</div>

<script>
fetch('./latest/payload_seal.json')
  .then(r => r.json())
  .then(seal => {
    const el = document.getElementById('sealMeta');
    const tree = seal.PayloadTreeHash ?? seal.payload_hash ?? 'N/A';
    const base = seal.BaselineCommit ?? seal.baseline_commit ?? 'N/A';
    const ts   = seal.RunTsUtc ?? seal.run_ts_utc ?? seal.RunUtc ?? 'N/A';
    const fc   = seal.FileCount ?? seal.file_count ?? 'N/A';

    el.innerHTML = `
      <div><span class="label">PayloadTreeHash</span> ${tree}</div>
      <div><span class="label">BaselineCommit</span> ${base}</div>
      <div><span class="label">Run Timestamp</span> ${ts}</div>
      <div><span class="label">File Count</span> ${fc}</div>
    `;
  })
  .catch(() => {
    document.getElementById('sealMeta').innerHTML =
      '<div style="color:#ff6b6b;">Seal load failed</div>';
  });
</script>

</body>
</html>
